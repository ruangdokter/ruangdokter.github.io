<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ruang Dokter â€” Konsul</title>
<link rel="icon" href="favicon.png">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="header">
    <div class="brand"><img id="logoImg" src="logo_light.png" alt="Ruang Dokter" height="28"> <span class="brand-text">Ruang Dokter</span></div>
    <div class="header-actions">
      <button id="settingsBtn" class="btn small">Pengaturan</button>
      <button id="themeToggle" class="btn small" title="Toggle theme">ðŸŒ™</button>
    </div>
  </header>

  <main class="container">
    <section class="left">
      <h3>Input Konsul â€” cepat</h3>

      <label>Nama Dokter</label>
      <input id="namaDokter" placeholder="dr. Agung Satria">

      <label>Lokasi</label>
      <select id="lokasi">
        <option value="IGD">IGD</option>
        <option value="Poli">Poli</option>
        <option value="Ruangan">Ruangan</option>
      </select>

      <label>Nama RS</label>
      <input id="namaRS" placeholder="RSAM">

      <hr>

      <label>Nama Pasien</label>
      <input id="namaPasien" placeholder="">
      <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
        <div style="flex:1">
          <label>Usia (tahun)</label>
          <input id="usia" type="number" min="0" placeholder="">
        </div>
        <div style="width:120px">
          <label>JK</label>
          <select id="jk"><option value="F">F</option><option value="M">M</option></select>
        </div>
      </div>

      <div id="bbRow" style="display:none">
        <label>Berat Badan (kg)</label>
        <input id="bb" placeholder="">
        <div class="muted">Field BB muncul otomatis jika usia &lt; 18 tahun.</div>
      </div>

      <label>Diagnosis (Dx)</label>
      <input id="dx" placeholder="">

      <label>Subjektif (S)</label>
      <textarea id="s" rows="2" placeholder=""></textarea>

      <label>GCS (E V M)</label>
      <div class="gcs-row">
        <input id="gcsE" maxlength="1" placeholder="E">
        <input id="gcsV" maxlength="1" placeholder="V">
        <input id="gcsM" maxlength="1" placeholder="M">
      </div>

      <label>Vitals / TTV</label>
      <div class="vitals-grid">
        <div><label>TD (sistolik/diastolik)</label><input id="td" placeholder="177/98"></div>
        <div><label>HR</label><input id="hr" placeholder="102"></div>
        <div><label>RR</label><input id="rr" placeholder="25"></div>
        <div><label>T (Â°C)</label><input id="temp" placeholder="36.4"></div>
        <div style="grid-column: span 2;">
          <label>SpOâ‚‚</label>
          <div style="display:flex;gap:6px;align-items:center">
            <input id="spo2" placeholder="99" style="width:80px">
            <select id="o2type" style="width:160px">
              <option value="RA">Room Air</option>
              <option value="NC">Oâ‚‚ NC</option>
              <option value="FM">Oâ‚‚ Face Mask</option>
              <option value="NRM">Oâ‚‚ NRM</option>
              <option value="VM">Oâ‚‚ Venturi Mask</option>
              <option value="HFNC">Oâ‚‚ HFNC</option>
              <option value="VENT">Oâ‚‚ Ventilator</option>
            </select>
            <input id="o2flow" placeholder="lpm/Fi%" style="width:90px">
          </div>
          <div class="muted">Pilih type lalu isi flow (lpm) atau FiOâ‚‚ (%) sesuai jenis.</div>
        </div>
      </div>

      <label>Pemeriksaan Fisik (isi sesuai format kamu)</label>
      <div class="section-block">
        <label>Kepala</label>
        <input id="kepala" placeholder="CA -/-, SI -/-">

        <label>Thorax</label>
        <input id="thorax" placeholder="ves +/+, rh -/-, wh -/-. BJ reg, m -, g -">

        <label>Abdomen</label>
        <input id="abdomen" placeholder="supel, BU +">

        <label>Ekstremitas</label>
        <input id="ekstremitas" placeholder="akral hangat, CRT <2s">

        <label>Catatan fisik lain (opsional)</label>
        <input id="lain" placeholder="">
      </div>

      <label>Objektif (O) â€” auto dari GCS, TTV & Fisik (bisa diedit)</label>
      <textarea id="o" rows="4"></textarea>

      <label>P (Terapi / Plan)</label>
      <textarea id="p" rows="4" placeholder="- IVFD NaCl 0.9% 20 tpm
- NGT DC
- Inj. Ranitidin 50 mg/12 jam
- O2 NC 3 lpm"></textarea>

      <div class="row" style="margin-top:8px">
        <button id="buatBtn" class="btn" style="flex:1">Buat & Tampilkan</button>
        <button id="copyBtn" class="btn secondary" style="width:110px" disabled>Copy</button>
        <button id="resetBtn" class="btn outline" style="width:110px">Reset</button>
      </div>

      <div class="row" style="margin-top:8px">
        <button id="aiQuickBtn" class="btn outline" style="flex:1">Analisis AI (Quick â†’ ChatGPT)</button>
        <button id="saveBtn" class="btn" style="width:140px">Simpan ke History</button>
      </div>

      <div style="margin-top:6px">
        <label>Template Cepat</label>
        <select id="templateSelect"></select>
        <div style="display:flex;gap:8px;margin-top:6px">
          <button id="applyTemplate" class="btn small">Pakai</button>
          <button id="addTemplate" class="btn small secondary">Tambah Template</button>
          <button id="manageTemplate" class="btn small outline">Kelola Template</button>
        </div>
      </div>

    </section>

    <aside class="right">
      <h4>Hasil Konsul</h4>
      <div id="warnings" class="warnings"></div>
      <div id="ewsBadge" class="ews"></div>
      <div id="hasil" class="output" role="status" aria-live="polite"></div>

      <h4 style="margin-top:12px">History</h4>
      <div id="history" class="history"></div>

      <div style="margin-top:10px" class="muted">Catatan: AI Quick Copy membuka ChatGPT web; data pasien tidak dikirim tanpa persetujuan.</div>
    </aside>
  </main>

  <!-- Settings modal -->
  <div id="settings" class="modal" aria-hidden="true">
    <div class="content">
      <h4>Pengaturan</h4>
      <label>Nama Dokter</label><input id="setNama" placeholder="dr. Agung Satria">
      <label>Nama RS</label><input id="setRS" placeholder="RSAM">
      <label>Auto-prefix nama pasien</label>
      <select id="setPrefix"><option value="on" selected>On</option><option value="off">Off</option></select>
      <label>Jumlah shift</label><select id="setShift"><option>2</option><option selected>3</option><option>4</option></select>
      <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
        <button id="saveSet" class="btn">Simpan</button>
        <button id="closeSet" class="btn secondary">Tutup</button>
      </div>
      <p class="muted" style="margin-top:8px">Pengaturan disimpan di perangkat ini (localStorage).</p>
    </div>
  </div>

  <!-- Manage templates modal -->
  <div id="manageTemplates" class="modal" aria-hidden="true">
    <div class="content">
      <h4>Kelola Template</h4>
      <div id="templateList"></div>
      <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
        <button id="closeTpl" class="btn secondary">Tutup</button>
      </div>
    </div>
  </div>

  <footer class="footer">Â© 2025 Ruang Dokter</footer>

<script src="script.js"></script>
</body>
</html>
