<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ruang Dokter â€” v1.4.1</title>
<link rel="icon" href="assets/favicon.png">
<link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="header">
    <div class="brand"><img id="logo" src="assets/logo_header.png" alt="Ruang Dokter" height="40"><span class="brand-text">Ruang Dokter</span></div>
    <div class="header-actions">
      <button id="themeToggle" class="btn small" title="Toggle theme">ðŸŒ™</button>
    </div>
  </header>

  <nav class="nav">
    <button class="tabbtn active" data-tab="konsul">Konsul</button>
    <button class="tabbtn" data-tab="calculator">Kalkulator</button>
    <button class="tabbtn" data-tab="history">History</button>
    <button class="tabbtn" data-tab="templates">Template</button>
  </nav>

  <main class="container">
    <section id="konsul" class="tab">
      <h3>Form Konsul</h3>

      <label>Nama dokter (yang akan tampil pada konsul)</label>
      <input id="nama_dokter" placeholder="dr. Nama">

      <label>RS / Unit (bisa diubah)</label>
      <div class="inline-two">
        <input id="rs" placeholder="Nama RS">
        <input id="unit" placeholder="Unit (IGD/POLI)">
      </div>

      <label>Nama pasien</label>
      <input id="nama" placeholder="">

      <div class="inline-two">
        <div>
          <label>Usia (tahun)</label>
          <input id="usia" type="number" min="0" placeholder="">
        </div>
        <div>
          <label>Jenis Kelamin</label>
          <select id="jk"><option value="">-</option><option value="F">Perempuan</option><option value="M">Laki-laki</option></select>
        </div>
      </div>

      <div id="bbRow" class="hidden-row">
        <label>Berat badan (kg)</label>
        <input id="bb" placeholder="">
      </div>

      <label>Dx (Diagnosis)</label><input id="dx" placeholder="">
      <label>S (Subjective)</label><textarea id="s" placeholder=""></textarea>

      <div class="row-inline">
        <div class="card-mini">
          <label>GCS</label>
          <div class="gcs-row"><input id="gcsE" maxlength="1" placeholder="E"><input id="gcsV" maxlength="1" placeholder="V"><input id="gcsM" maxlength="1" placeholder="M"></div>
        </div>
        <div class="card-mini">
          <label>TTV</label>
          <div class="vitals-grid">
            <input id="td" placeholder="TD (mmHg) - ex: 120/80">
            <input id="hr" placeholder="HR (x/m)">
            <input id="rr" placeholder="RR (x/m)">
            <input id="temp" placeholder="T (Â°C) - use comma or dot">
          </div>
          <div id="map_qsofa" class="muted"></div>
          <div id="ews_box" style="margin-top:6px;"></div>
        </div>
      </div>

      <label>SpOâ‚‚</label>
      <div class="inline-three">
        <input id="spo2" placeholder="SpOâ‚‚ (%)">
        <select id="o2type"><option value="RA">Room Air</option><option value="NC">Oâ‚‚ NC</option><option value="NRM">Oâ‚‚ NRM</option><option value="FM">Oâ‚‚ FM</option><option value="VM">Oâ‚‚ VM</option><option value="HFNC">HFNC</option><option value="VENT">Ventilator</option></select>
        <input id="o2flow" class="hidden" placeholder="flow (LPM)">
      </div>

      <label>Pemeriksaan Fisik</label>
      <input id="kepala" value="Kepala: CA -/-, SI -/-">
      <input id="thorax" value="Thorax: ves +/+, rh -/-, wh -/-. BJ reg, m -, g -.">
      <input id="abdomen" value="Abdomen: supel, BU +">
      <input id="ekstremitas" value="Ekstremitas: akral hangat, CRT <2s">

      <label>P (Plan / Terapi)</label><textarea id="p" placeholder=""></textarea>

      <div class="row" style="margin-top:12px">
        <button id="buatBtn" class="btn">Buat & Tampilkan</button>
        <button id="copyBtn" class="btn outline">Copy</button>
        <button id="saveBtn" class="btn">Simpan ke History</button>
        <button id="resetBtn" class="btn secondary">Reset</button>
      </div>

      <h4>Hasil Konsul</h4><div id="hasil" class="output"></div>

      <h4 style="margin-top:18px">Riwayat Konsul (klik View untuk isi form)</h4>
      <div id="historyInline"></div>
    </section>

    <section id="calculator" class="tab" style="display:none">
      <h3>Kalkulator Klinis</h3>
      <div class="calc-grid">
        <div class="card-small">
          <h4>BMI</h4>
          <label>Berat (kg)</label><input id="calc_bb">
          <label>Tinggi (cm)</label><input id="calc_tb">
          <button id="calc_bmi" class="btn small">Hitung BMI</button>
          <div id="bmi_res" class="muted"></div>
        </div>
        <div class="card-small">
          <h4>MAP</h4>
          <label>TD Sistolik</label><input id="map_sys">
          <label>TD Diastolik</label><input id="map_dia">
          <button id="calc_map" class="btn small">Hitung MAP</button>
          <div id="map_res" class="muted"></div>
        </div>
        <div class="card-small">
          <h4>EWS Manual</h4>
          <label>RR</label><input id="ews_rr"><label>SpO2</label><input id="ews_spo2"><label>HR</label><input id="ews_hr"><label>T (Â°C)</label><input id="ews_temp"><label>GCS total</label><input id="ews_gcs"><button id="calc_ews" class="btn small">Hitung EWS</button><div id="ews_res"></div>
        </div>
        <div class="card-small">
          <h4>BSA</h4>
          <label>Berat (kg)</label><input id="bsa_bb"><label>Tinggi (cm)</label><input id="bsa_tb"><button id="calc_bsa" class="btn small">Hitung BSA</button><div id="bsa_res"></div>
        </div>
        <div class="card-small">
          <h4>Anion Gap</h4>
          <label>Na</label><input id="ag_na"><label>Cl</label><input id="ag_cl"><label>HCO3</label><input id="ag_hco3"><button id="calc_ag" class="btn small">Hitung AG</button><div id="ag_res"></div>
        </div>
        <div class="card-small">
          <h4>GFR (CKD-EPI)</h4>
          <label>Usia</label><input id="gfr_age"><label>Jenis Kelamin</label><select id="gfr_sex"><option value="F">Perempuan</option><option value="M">Laki-laki</option></select><label>Kreatinin (mg/dL)</label><input id="gfr_scr"><button id="calc_gfr" class="btn small">Hitung GFR</button><div id="gfr_res"></div>
        </div>
      </div>
    </section>

    <section id="history" class="tab" style="display:none">
      <h3>History</h3>
      <div class="history-controls">
        <button id="filter_all" class="btn small">Semua</button>
        <button id="filter_notdone" class="btn small outline">Belum Selesai</button>
        <button id="filter_done" class="btn small outline">Selesai</button>
        <button id="exportJson" class="btn small secondary">Backup JSON</button>
        <input id="importFile" type="file" style="display:none">
        <button id="importBtn" class="btn small">Restore JSON</button>
      </div>
      <div id="historyList"></div>
    </section>

    <section id="templates" class="tab" style="display:none">
      <h3>Template</h3>
      <div class="template-controls">
        <input id="templateTitle" placeholder="Judul template (mis: Sepsis berat)">
        <label>Isi Pemeriksaan Fisik</label><textarea id="templatePhys"></textarea>
        <label>Isi Terapi (P)</label><textarea id="templatePlan"></textarea>
        <div class="row"><button id="addTemplate" class="btn">Tambah Template</button><button id="clearTemplates" class="btn secondary">Hapus Semua Template</button></div>
      </div>
      <div id="templateList"></div>
    </section>

  </main>

  <footer class="footer">
    <div>Â© Ruang Dokter 2025 â€” v1.4.1</div>
    <div><button id="feedbackBtn" class="btn small outline">Saran & Masukan</button></div>
  </footer>

  <div id="feedbackModal" class="modal"><div class="modal-content"><h4>Saran & Masukan</h4><p>Punya ide, kritik, atau saran untuk Ruang Dokter? Klik tombol di bawah untuk mengirim melalui WhatsApp.</p><div class="row"><a id="waLink" class="btn" href="#" target="_blank">Kirim lewat WhatsApp</a><button id="fbClose" class="btn secondary">Tutup</button></div></div></div>

<script src="script.js"></script>
</body>
</html>
